<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<title>Test ataku botów - debug</title>
<style>
  body { font-family: monospace; background:#111; color:#0f0; padding:20px; }
  #log { margin-top:15px; height:200px; overflow-y:scroll; background:#000; border:1px solid #0f0; padding:10px; }
  button[disabled] { opacity: 0.5; cursor: not-allowed; }
</style>
</head>
<body>

<h2>Panel botów debug</h2>

<label>Nick (wymagany):</label>
<input id="nickInput" autocomplete="off" />
<br/>
<label>Adres strony:</label>
<input id="urlInput" value="https://twoja-strona.pl" autocomplete="off" />
<br/>
<label><input type="checkbox" id="acceptCheckbox" /> Akceptuję regulamin</label>
<br/>
<button id="startBtn" disabled>Start boty</button>
<button id="stopBtn" disabled>Stop boty</button>

<div id="log"></div>

<script>
(() => {
  const nickInput = document.getElementById('nickInput');
  const urlInput = document.getElementById('urlInput');
  const acceptCheckbox = document.getElementById('acceptCheckbox');
  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const logDiv = document.getElementById('log');

  let intervalId = null;
  let botCounter = 0;
  const visitsPerSecond = 10;
  const delay = 1000 / visitsPerSecond;

  // Proste user-agenty do testu
  const userAgents = [
    "jfjdensjsk/1.0",
    "jxdnnd/2.3",
    "randomDeviceXYZ/5.6"
  ];

  function log(msg) {
    const time = new Date().toLocaleTimeString();
    logDiv.textContent += `[${time}] ${msg}\n`;
    logDiv.scrollTop = logDiv.scrollHeight;
  }

  function updateStartBtn() {
    startBtn.disabled = !acceptCheckbox.checked || !nickInput.value.trim();
  }

  nickInput.addEventListener('input', updateStartBtn);
  acceptCheckbox.addEventListener('change', updateStartBtn);

  startBtn.onclick = () => {
    if(intervalId) return;

    const nick = nickInput.value.trim();
    let url = urlInput.value.trim();
    if(!url.startsWith('http://') && !url.startsWith('https://')) {
      url = 'http://' + url;
    }

    botCounter = 0;
    log("Start botów...");

    intervalId = setInterval(() => {
      botCounter++;
      const botId = botCounter;
      const randomUA = userAgents[Math.floor(Math.random() * userAgents.length)];

      log(`Bot #${botId} łączy się jako: ${randomUA}`);

      const iframe = document.createElement('iframe');
      iframe.src = url + '?ua=' + encodeURIComponent(randomUA) + '&nick=' + encodeURIComponent(nick) + '&t=' + Date.now();
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      iframe.style.position = 'absolute';
      iframe.style.left = '-9999px';

      document.body.appendChild(iframe);

      setTimeout(() => {
        iframe.remove();
        log(`Bot #${botId} iframe usunięty.`);
      }, 2000);
    }, delay);

    startBtn.disabled = true;
    stopBtn.disabled = false;
    nickInput.disabled = true;
    urlInput.disabled = true;
    acceptCheckbox.disabled = true;
  };

  stopBtn.onclick = () => {
    if(!intervalId) return;
    clearInterval(intervalId);
    intervalId = null;
    log("Boty zatrzymane.");

    startBtn.disabled = false;
    stopBtn.disabled = true;
    nickInput.disabled = false;
    urlInput.disabled = false;
    acceptCheckbox.disabled = false;
  };

  updateStartBtn();
})();
</script>

</body>
</html>
